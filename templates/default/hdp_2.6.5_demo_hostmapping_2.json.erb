{
  "blueprint" : "<%= node['hw']['hdp']['cluster']['blueprint_name'] %>",
  "default_password" : "admin",
  "configurations" : [
    {
      "ams-grafana-env" : {
        "properties" : {
          "metrics_grafana_data_dir" : "<%= node['hw']['ambari']['metrics']['config']['ams-grafana-env']['metrics_grafana_data_dir'] %>",
          "metrics_grafana_username" : "<%= node['hw']['ambari']['metrics']['config']['ams-grafana-env']['metrics_grafana_username'] %>",
          "metrics_grafana_password" : "<%= node['hw']['ambari']['metrics']['config']['ams-grafana-env']['metrics_grafana_password'] %>"
        }
      }
    },
    {
      "ams-hbase-site" : {
        "properties" : {
          "hbase.rootdir" : "<%= node['hw']['ambari']['metrics']['config']['ams-hbase-site']['hbase.rootdir'] %>",
          "hbase.tmp.dir" : "<%= node['hw']['ambari']['metrics']['config']['ams-hbase-site']['hbase.tmp.dir'] %>"
        }
      }
    },
    {
      "ams-site" : {
        "properties_attributes" : { },
        "properties" : {
          "timeline.metrics.aggregator.checkpoint.dir" : "<%= node['hw']['ambari']['metrics']['config']['ams-site']['timeline.metrics.aggregator.checkpoint.dir'] %>",
          "timeline.metrics.service.webapp.address" : "<%= node['fqdn'] %>:6188"
        }
      }
    },
    {
      "hdfs-site" : {
        "properties" : {
          "dfs.datanode.data.dir" : "<%= node['hw']['hadoop']['hdfs']['config']['hdfs-site']['dfs.datanode.data.dir'] %>",
          "dfs.journalnode.edits.dir": "<%= node['hw']['hadoop']['hdfs']['config']['hdfs-site']['dfs.journalnode.edits.dir'] %>",
          "dfs.namenode.name.dir": "<%= node['hw']['hadoop']['hdfs']['config']['hdfs-site']['dfs.namenode.name.dir'] %>"
        }
      }
    },
    {
      "hive-site" : {
        "properties" : {
          "javax.jdo.option.ConnectionPassword" : "<%= node['hw']['hive']['config']['hive-site']['avax.jdo.option.ConnectionPassword'] %>"
        }
      }
    },
    {
      "infra-solr-env" : {
        "properties" : {
          "infra_solr_datadir" : "<%= node['hw']['ambari']['infra']['config']['infra-solr-env']['infra_solr_datadir'] %>",
          "infra_solr_keystore_password" : "<%= node['hw']['ambari']['infra']['config']['infra-solr-env']['infra_solr_keystore_password'] %>",
          "infra_solr_truststore_password" : "<%= node['hw']['ambari']['infra']['config']['infra-solr-env']['infra_solr_truststore_password'] %>"
        }
      }
    },
    {
      "kafka-broker" : {
        "properties" : {
          "log.dirs" : "<%= node['hw']['ambari']['kafka']['config']['kafka-broker']['log.dirs'] %>"
        }
      }
    },
    {
      "logfeeder-env" : {
        "properties" : {
          "logfeeder_keystore_password" : "<%= node['hw']['logsearch']['config']['logfeeder-env']['logfeeder_keystore_password'] %>",
          "logfeeder_truststore_password" : "<%= node['hw']['logsearch']['config']['logfeeder-env']['logfeeder_truststore_password'] %>"
        }
      }
    },
    {
      "logsearch-admin-json" : {
        "properties" : {
          "logsearch_admin_username" : "<%= node['hw']['logsearch']['config']['logsearch-admin-json']['logsearch_admin_username'] %>",
          "logsearch_admin_password" : "<%= node['hw']['logsearch']['config']['logsearch-admin-json']['logsearch_admin_password'] %>"
        }
      }
    },
    {
      "logsearch-env" : {
        "properties" : {
          "logsearch_keystore_password" : "<%= node['hw']['logsearch']['config']['logsearch-env']['logsearch_keystore_password'] %>",
          "logsearch_truststore_password" : "<%= node['hw']['logsearch']['config']['logsearch-env']['logsearch_truststore_password'] %>"
        }
      }
    },
    {
      "oozie-env" : {
        "properties_attributes" : { },
        "properties" : {
          "oozie_data_dir" : "<%= node['hw']['oozie']['config']['oozie-env']['oozie_data_dir'] %>",
          "oozie_database" : "<%= node['hw']['oozie']['config']['oozie-env']['oozie_database'] %>"
        }
      }
    },
    {
      "oozie-site" : {
        "properties_attributes" : { },
        "properties" : {
          "oozie.db.schema.name" : "<%= node['hw']['oozie']['config']['oozie-site']['oozie.db.schema.name'] %>",
          "oozie.service.JPAService.jdbc.username" : "<%= node['hw']['oozie']['config']['oozie-site']['oozie.service.JPAService.jdbc.username'] %>",
          "oozie.service.JPAService.jdbc.password" : "<%= node['hw']['oozie']['config']['oozie-site']['oozie.service.JPAService.jdbc.password'] %>",
          "oozie.service.JPAService.jdbc.driver" : "<%= node['hw']['oozie']['config']['oozie-site']['oozie.service.JPAService.jdbc.driver'] %>",
          "oozie.service.JPAService.jdbc.url" : "<%= node['hw']['oozie']['config']['oozie-site']['oozie.service.JPAService.jdbc.url'] %>"
        }
      }
    },
    {
      "storm-site" : {
        "properties": {
          "storm.local.dir" : "<%= node['hw']['storm']['config']['storm-site']['storm.local.dir'] %>"
        }
      }
    },
    {
      "webhcat-site" : {
        "properties": {
          "webhcat.proxyuser.ambari.hosts" : "<%= node['fqdn'] %>"
        }
      }
    },
    {
      "yarn-site" : {
        "properties_attributes" : {
          "final" : {
            "yarn.resourcemanager.cluster-id" : "true"
          }
        },
        "properties" : {
          "yarn.nodemanager.local-dirs" : "<%= node['hw']['hadoop']['hdfs']['config']['yarn-site']['yarn.nodemanager.local-dirs'] %>",
          "yarn.nodemanager.log-dirs" : "<%= node['hw']['hadoop']['hdfs']['config']['yarn-site']['yarn.nodemanager.log-dirs'] %>",
          "yarn.resourcemanager.cluster-id" : "<%= cluster['yarn.resourcemanager.cluster-id'] %>",
          "yarn.timeline-service.http-authentication.proxyuser.ambari.hosts" : "<%= node['fqdn'] %>",
          "yarn.timeline-service.leveldb-state-store.path" : "<%= node['hw']['hadoop']['hdfs']['config']['yarn-site']['yarn.timeline-service.leveldb-state-store.path'] %>",
          "yarn.timeline-service.leveldb-timeline-store.path" : "<%= node['hw']['hadoop']['hdfs']['config']['yarn-site']['yarn.timeline-service.leveldb-timeline-store.path'] %>"
        }
      }
    },
    {
      "zoo.cfg" : {
        "properties" : {
          "dataDir" : "<%= node['hw']['zookeeper']['config']['zoo.cfg']['dataDir'] %>"
        }
      }
    }
  ],
  "config_recommendation_strategy" : "ALWAYS_APPLY_DONT_OVERRIDE_CUSTOM_VALUES",
  "host_groups" :[
    {
      "name" : "host_group_demo",
      "hosts" : [
        {
          "fqdn" : "ambari-server"
        }
      ]
    }
  ]
}
